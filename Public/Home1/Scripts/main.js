$(function(){function e(e){var t=e.data;if(t&&t.result){t.bid_rate0<=0&&(t.bid_rate0=t.ask_rate0),t.ask_rate0<=0&&(t.ask_rate0=t.bid_rate0),t.bid_rate0=t.bid_rate0>0?t.bid_rate0:t.ask_rate0?t.ask_rate0:0,t.ask_rate0=t.ask_rate0>0?t.ask_rate0:t.bid_rate0?t.bid_rate0:0;var a=(t.bid_rate0+t.ask_rate0)/2,n=a*("undefined"==typeof global_btc_cny_rate?18e3:global_btc_cny_rate),r=2;r=n>1?2:n>.1?3:n>.01?4:n>.001?5:6;var i=$("#ul-bid-list li").eq(0).find(".price").html();if(t.bid_rate0>0&&t.ask_rate0>0&&void 0!==i){var l=i.length-1-i.indexOf("."),o=get_element("orderbook_last_rate");if(o){s=+parseFloat(o.innerHTML).toFixed(l);o.innerHTML=a.toFixed(l),a>s?o.className="red":a<s&&(o.className="green")}else var s=a;if(a=+parseFloat(a).toFixed(l),$.isNumeric(a)&&a>0&&s!=a){var d=get_element("market_unit_symbol");d=void 0===d?"":d.innerHTML;var _=document.title;_=_.substr(_.indexOf(" ")+1),document.title=d+a.toFixed(l)+" "+_;var c=$(".coin-selected span").eq(2).html();if(+parseFloat(c?c.substr(0,c.indexOf("<")-1):"-1")==a){var m=$(".coin-selected font").eq(0).html();if(m.indexOf("+")>-1&&m.indexOf("-")>-1)var u=m.replace(/-/,""),b=+u.substr(1,u.length-2);else{b=+m.substr(1,m.length-2);m.indexOf("-")>-1&&(b=-b)}x=b}else{var f="",g=get_element("top_last_rate_change").getElementsByTagName("font")[0].innerHTML;if(g.indexOf("+")>-1&&g.indexOf("-")>-1){var p=g.replace(/-/,"");f=+p.substr(1,p.length-2)}else f=+g.substr(1,g.length-2),g.indexOf("-")>-1&&(f=-f);var h=parseFloat((100*s/(100+f)).toFixed(l)),x=(a-h)/h*100}isNaN(x)||(trade_global.symbol.toLowerCase().indexOf("_btc")>-1?get_element("top_last_rate_change").innerHTML='<dl class="price-dl"><dd><i id="currPrice">'+a.toFixed(l)+'</i><em>BTC</em><small> æˆ– </small><i id="currCNY">'+n.toFixed(r)+"</i><em>CNY</em></dd></dl><dl><dd><em><font color="+(x>=0?"#f7471b":"#08a287")+">"+(x>=0?"+":"")+x.toFixed(2)+'%</font></em></dd></dl><div style="clear:both"></div>':get_element("top_last_rate_change").innerHTML="<i id=currPrice>"+a.toFixed(l)+"</i><em><font color="+(x>=0?"#f7471b":"#08a287")+">"+(x>=0?"+":"")+x.toFixed(2)+'%</font></em><span class=arr-con><i class="caret" id="upArrow"></i><i class="caret" id="dnArrow"></i></span>',a>s?(get_element("top_last_rate_change").className="xiaoguoup",$("#upArrow").stop().animate({bottom:"10px"},2e3,function(){$(this).attr("style","")}).show(),$("#currPrice").stop().animate({color:"#ff5e23"},1500,function(){$(this).attr("style","")})):a<s&&(get_element("top_last_rate_change").className="xiaoguodown",$("#dnArrow").stop().animate({top:"25px"},2e3,function(){$(this).attr("style","")}).show(),$("#currPrice").stop().animate({color:"#008069"},1500,function(){$(this).attr("style","")})),a=null,s=null,l=null,n=null,r=null,x=null)}}""!=t.ask_list_table&&(get_element("ul-ask-list").innerHTML=t.ask_list_table),""!=t.bid_list_table&&(get_element("ul-bid-list").innerHTML=t.bid_list_table),""!=t.trade_list_table&&(get_element("ul-trade-list").innerHTML=t.trade_list_table),Object.keys(t.market_rates).length>0&&get_Price_Percent(t.market_rates),t=null}$("#ot2").hasClass("order-t-active")?checkEmpty(2):checkEmpty(0)}void 0===window.get_element&&(window.get_element=function(e,t){return null==t&&(t=0),obj=document.getElementById(e),obj||(obj=document.getElementsByName(e),obj?obj[t]:null)});var t=trade_global.symbol.toLowerCase(),a=io("https://ws.bter.com");a.on("trade_data",function(t){e(t),t=null}),a.on("disconnect",function(){}),a.on("connect",function(){a.emit("join",t)}),a.on("reconnect",function(){a.emit("join",t)}),a.on("reconnect_error",function(){})});